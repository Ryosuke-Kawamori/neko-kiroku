library(rvest)
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9")
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes("//table")
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes("/table")
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes("table")
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(xpaath="table")
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(class=".schedule")
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule")
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table()
?encoding
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
html_text()
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
.$[[1]] %>%
html_text()
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
html_text()
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1)
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1)[1]
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
guess_encoding()
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
repair_encoding(from="shift-jis")
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
View()
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1)
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>% View()
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
[[]]
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
[1,]
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
.$[1,]
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
.[1,]
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
.[,1]
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
.[,1] %>%
iconv(from="utf16", to="utf8")
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
.[,1] %>%
iconv(from="utf16", to="utf8")
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
.[,1]
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
.[,1]
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9", encoding="shift-jis") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
.[,1]
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9", encoding="shiftjis") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
.[,1]
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9", encoding="SHIFT-JIS") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
.[,1]
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9", encoding="SHIFT-JIS") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1)
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
.[,1]
Sys.setenv(LANG = "jp")
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
.[,1]
Sys.setenv(LANG = "en")
system("defaults write org.R-project.R force.LANG ja_JP.UTF-8")
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1) %>%
.[,1]
system("locale")
library(rvest)
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table() %>%
`[[`(1)
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table(header = TRUE) %>%
`[[`(1)
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table(header = TRUE) %>%
`[[`(1) %>%
gather(key=key, value=value)
library(tidyverse)
library(tidyverse)
read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table(header = TRUE) %>%
`[[`(1) %>%
gather(key=key, value=value)
neko_df <= read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table(header = TRUE) %>%
`[[`(1)
neko_df <- read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table(header = TRUE) %>%
`[[`(1)
neko_df
neko_df
neko_df %>%
as_tibble()
neko_df %>%
as_tibble() %>%
gather(key=key, value=value, -日程)
neko_df %>%
as_tibble() %>%
gather(key=key, value=value, -日程) %>%
filter(日程!=天気)
neko_df %>%
as_tibble() %>%
gather(key=key, value=value, -日程) %>%
filter(日程!="天気")
neko_df %>%
neko_raw_df <- read_html("https://chouseisan.com/s?h=ae75a68c77df431a996bc0fdbb3496e9") %>%
html_nodes(".schedule") %>%
html_table(header = TRUE) %>%
`[[`(1)
neko_df <- neko_raw_df %>%
as_tibble() %>%
gather(key=key, value=value, -日程) %>%
filter(日程!="天気")
neko_df
source('~/Library/Mobile Documents/com~apple~CloudDocs/猫サークル/neko_kiroku/script/scrape_tyouseisan.R', echo=TRUE)
neko_df %>% View
source('~/Library/Mobile Documents/com~apple~CloudDocs/猫サークル/neko_kiroku/script/scrape_tyouseisan.R', echo=TRUE)
neko_df %>% View
`%!in%` <- function(x,y){return(!x%in%y)}
neko_df <- neko_raw_df %>%
as_tibble() %>%
gather(key=key, value=value, -日程) %>%
filter(日程 %!in% c("天気", "コメント"))
neko_df
neko_df %>% View()
neko_df <- neko_raw_df %>%
as_tibble() %>%
gather(key=key, value=value, -日程) %>%
filter(日程 %!in% c("天気", "コメント")) %>%
mutate(key=ymd(key))
library(tidyverse)
library(lubridate)
library(rvest)
neko_df <- neko_raw_df %>%
as_tibble() %>%
gather(key=key, value=value, -日程) %>%
filter(日程 %!in% c("天気", "コメント")) %>%
mutate(key=md(key))
neko_df <- neko_raw_df %>%
as_tibble() %>%
gather(key=key, value=value, -日程) %>%
filter(日程 %!in% c("天気", "コメント")) %>%
mutate(key=ymd(paste("2018/",key)))
neko_df
neko_df %>%
filter(日程=="あげ")
neko_df %>%
filter(日程=="あげ") %>%
ggplot(aes(key, value))+
geom_line()+
geom_point()
neko_df %>%
filter(日程=="あげ") %>%
mutate(value = case_when(value == "○" ~ 1,
value == "△" ~ 0,
value == "×" ~ -1)) %>%
ggplot(aes(key, value))+
geom_line()+
geom_point()
neko_df <- neko_raw_df %>%
as_tibble() %>%
gather(key=key, value=value, -日程) %>%
filter(日程 %!in% c("天気", "コメント")) %>%
mutate(key=ymd(paste("2018/",key))) %>%
mutate(value = case_when(value == "○" ~ 1,
value == "△" ~ 0,
value == "×" ~ -1)) %>%
ggplot(aes(key, value, fill=日程))
neko_df %>%
ggplot(aes(key, value, fill=日程))+
geom_point()+
geom_line()
neko_df <- neko_raw_df %>%
as_tibble() %>%
gather(key=key, value=value, -日程) %>%
filter(日程 %!in% c("天気", "コメント")) %>%
mutate(key=ymd(paste("2018/",key))) %>%
mutate(value = case_when(value == "○" ~ 1,
value == "△" ~ 0,
value == "×" ~ -1))
neko_df
neko_df %>%
ggplot(aes(key, value, fill=日程))+
geom_point()+
geom_line()
neko_df %>%
ggplot(aes(key, value, color=日程))+
geom_point()+
geom_line()
theme_set(theme_gray(base_family="HiraKakuProN-W3"))
neko_df %>%
ggplot(aes(key, value, fill=日程))+
geom_point()+
geom_line()
